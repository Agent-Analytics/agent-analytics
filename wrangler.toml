name = "agent-analytics"
main = "src/platforms/cloudflare.js"
compatibility_date = "2024-01-01"

# Uncomment and set your Cloudflare account ID:
# account_id = "YOUR_ACCOUNT_ID"

# Uncomment to use a custom domain (optional):
# routes = [
#   { pattern = "analytics.yourdomain.com", custom_domain = true }
# ]

[[d1_databases]]
binding = "DB"                    # ⚠️ Must be "DB" — the code expects this exact name
database_name = "agent-analytics" # ← name you gave to `wrangler d1 create`
database_id = "YOUR_DATABASE_ID"  # ← paste the ID from `wrangler d1 create` output

[vars]
ALLOWED_ORIGINS = "*"
# Restrict to specific origins in production:
# ALLOWED_ORIGINS = "https://yoursite.com,https://app.yoursite.com"

# Secrets (set via CLI, not here):
# API_KEYS      → for reading data (wrangler secret put API_KEYS)
# PROJECT_TOKENS → for ingestion auth (wrangler secret put PROJECT_TOKENS)
